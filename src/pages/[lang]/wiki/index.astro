---
export const prerender = true;

import { getCollection } from 'astro:content';
import type { SupportedLang } from '../../../types/lang';
import { selectDocsHomeEntry } from '../../../utils/docsHome';

export function getStaticPaths() {
  return [{ params: { lang: 'pt' } }, { params: { lang: 'en' } }, { params: { lang: 'es' } }];
}

const lang = (Astro.params.lang ?? 'pt') as SupportedLang;
const entries = await getCollection('atividades');
const homeEntry = selectDocsHomeEntry(entries);

if (!homeEntry) {
  return Astro.redirect(`/${lang}/atividades`, 302);
}

return Astro.redirect(`/${lang}/wiki/${homeEntry.slug}`, 302);
---
