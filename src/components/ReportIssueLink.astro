---
export interface Props {
  owner: string;
  repo: string;
  template?: string;
  text?: string;
  class?: string;
  labels?: string[] | string;
}

const {
  owner,
  repo,
  template = 'report-page-error.yml',
  text = 'Reportar erro',
  class: className = 'btn btn-xs btn-outline',
  labels = ['report-error'],
} = Astro.props;

const currentUrl = Astro.url.href;
const labelValue = Array.isArray(labels) ? labels.join(',') : labels;
const issueUrl =
  `https://github.com/${owner}/${repo}/issues/new` +
  `?template=${encodeURIComponent(template)}` +
  `&labels=${encodeURIComponent(labelValue)}` +
  `&url=${encodeURIComponent(currentUrl)}`;
---

<a href={issueUrl} target="_blank" rel="noopener noreferrer" class={className}>
  {text}
</a>
