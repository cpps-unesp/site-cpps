---
import { getTranslatedPath } from '../utils/getTranslatedPath';

interface Props {
  heroData: any;
  lang?: string;
}

const { heroData, lang = 'pt' } = Astro.props;
---

<section
  class="relative z-0 min-h-[100dvh] w-full bg-cover bg-center bg-no-repeat sm:bg-top"
  style={`background-image: url('${heroData?.hero.link}')`}
>
  <!-- ðŸ”³ Overlay em mobile usando base-100 para adaptaÃ§Ã£o automÃ¡tica ao tema -->
  <div
    class="from-base-100 via-base-100/90 to-base-100/80 absolute inset-0 z-0 bg-gradient-to-b sm:hidden"
  >
  </div>

  <!-- ðŸ”³ Gradiente lateral no desktop usando base-100 para adaptaÃ§Ã£o automÃ¡tica ao tema -->
  <div class="absolute inset-0 z-0 hidden sm:block">
    <div class="bg-base-100 absolute inset-y-0 left-0 w-80"></div>
    <div
      class="from-base-100 via-base-100/90 absolute inset-y-0 right-[35%] left-80 bg-gradient-to-r to-transparent"
    >
    </div>
  </div>

  <!-- ConteÃºdo -->
  <div
    class="relative z-10 mx-auto flex h-full min-h-[100dvh] w-full max-w-7xl items-start px-4 pt-32 sm:items-center sm:px-6 sm:pt-0 lg:px-8"
  >
    <div class="flex w-full flex-col items-start text-left">
      <!-- Logo + TÃ­tulo -->
      <div class="mb-8 flex flex-col items-center gap-6 text-center sm:flex-row sm:text-left">
        <img
          src="/imagens/logos/cpps/logo-cpps-01_rev_1.png"
          alt="Logo CPPS"
          class="z-10 h-32 w-auto sm:h-48 md:h-64"
        />
        <h1
          class="titulo text-base-content z-10 mt-4 text-3xl leading-tight sm:mt-0 sm:text-5xl md:text-6xl"
        >
          {/* eslint-disable-next-line astro/no-set-html-directive */}
          <Fragment set:html={heroData?.hero.title} />
        </h1>
      </div>

      <!-- DescriÃ§Ã£o -->
      <div class="w-full max-w-2xl px-2 text-center sm:px-0 sm:text-left">
        <p
          class="text-base-content mb-6 text-base leading-relaxed md:text-lg"
        >
          {/* eslint-disable-next-line astro/no-set-html-directive */}
          <Fragment set:html={heroData?.hero.description} />
        </p>

        <!-- BotÃ£o -->
        <div
          class="mt-4 flex flex-col items-center justify-end gap-4 sm:flex-row sm:items-end sm:justify-end"
        >
          {
            heroData?.hero.button && (
              <a
                href={(() => {
                  const url = heroData.hero.button.url || '';
                  if (url.startsWith('http://') || url.startsWith('https://')) return url;
                  if (url.startsWith(`/${lang}/`) || url === `/${lang}`) return url;
                  const normalized = url.startsWith('/') ? url.slice(1) : url;
                  const translated = getTranslatedPath(normalized as any, lang as any);
                  const path = translated.startsWith('/') ? translated : `/${translated}`;
                  return `/${lang}${path}`;
                })()}
                class="btn btn-primary px-6 py-3 text-lg whitespace-nowrap shadow-lg"
                style="color: white;"
              >
                {heroData.hero.button.text}
              </a>
            )
          }
        </div>
      </div>
    </div>
  </div>
</section>
