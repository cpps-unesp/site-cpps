---
import { getLangFromUrl } from '../utils/getLangFromUrl';

interface Props {
  href: string;
  class?: string;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  [key: string]: any;
}

const { href, class: className, ...rest } = Astro.props;
const currentLang = getLangFromUrl(Astro.url);

let localizedHref = href;

if (href.startsWith('/') && !href.startsWith('http') && !/^\/(pt|en|es)(\/|$)/.test(href)) {
  if (href === '/') {
    localizedHref = `/${currentLang}/`;
  } else {
    localizedHref = `/${currentLang}${href}`;
  }
}

localizedHref = localizedHref.replace(/\/+/g, '/');
---

<a href={localizedHref} class={className} {...rest}>
  <slot />
</a>
