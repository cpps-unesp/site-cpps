---
import slugify from 'slugify';
import { getTranslations } from '../utils/i18n';

const { post, lang } = Astro.props;
const locale = getTranslations(lang);
const { title, resumo, image, tags, date, author } = post.data;
const slug = `/${lang}/noticias/${post.slug}`;
---

<div class="group bg-base-100 relative mb-12 overflow-hidden rounded-2xl shadow-xl">
  <div class="grid gap-0 md:grid-cols-2">
    <div class="relative h-64 overflow-hidden md:h-auto">
      <img
        src={image}
        alt={title}
        class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
      />
    </div>
    <div class="bg-primary text-primary-content flex flex-col justify-center p-8 md:p-12">
      <div class="mb-4 flex flex-wrap gap-2">
        {
          tags.map((tag: string) => (
            <span class="rounded bg-white/20 px-2 py-1 text-xs font-bold tracking-wider uppercase">
              {tag}
            </span>
          ))
        }
      </div>

      <a href={slug} class="hover:underline">
        <h2 class="mb-4 text-3xl leading-tight font-bold md:text-5xl">
          {title}
        </h2>
      </a>

      <p class="mb-6 line-clamp-3 text-lg opacity-90">
        {resumo}
      </p>

      <div class="flex items-center gap-4 text-sm font-medium opacity-80">
        <span
          >{
            new Date(date).toLocaleDateString(
              lang === 'pt' ? 'pt-BR' : lang === 'en' ? 'en-US' : 'es-ES'
            )
          }</span
        >
        {
          author && (
            <>
              <span class="h-1 w-1 rounded-full bg-current" />
              <span>
                {locale.noticias?.by || 'Por'} {author}
              </span>
            </>
          )
        }
      </div>
    </div>
  </div>
</div>
