---
// src/components/BlocoSection.astro
import TextoComCheck from './TextoComCheck.astro';
import CheckIcon from '../icons/CheckIcon.astro';

const { blocos } = Astro.props;
---

<section class="mt-16 space-y-24 px-4 md:px-8 lg:px-16">
  {
    Object.entries(blocos).map(([key, bloco], index) => {
      const aplicarReverse = bloco.intercalar ? index % 2 === 1 : (bloco.reverse ?? false);

      // Garante que imagem seja sempre array
      const imagens = Array.isArray(bloco.imagem) ? bloco.imagem : [bloco.imagem];

      return (
        <div
          class={`mx-auto flex max-w-7xl flex-col md:flex-row ${aplicarReverse ? 'md:flex-row-reverse' : ''} items-center gap-8`}
          key={key}
        >
          {/* Coluna de texto */}
          <div class="md:w-7/12">
            <h2 class="text-primary mb-6 text-4xl font-extrabold">{bloco.titulo}</h2>
            <TextoComCheck texto={bloco.texto} />

            {bloco.departamentos && (
              <ul class="mt-6 list-none space-y-4 pl-8">
                {' '}
                {bloco.departamentos.map((item) => (
                  <div class="flex items-start gap-2">
                    <CheckIcon size={24} class="mt-1" />
                    <span class="paragrafo">{item}</span>
                  </div>
                ))}
              </ul>
            )}
          </div>

          {/* Coluna fixa de imagens */}
          <div class="flex flex-col items-center justify-center gap-6 md:w-5/12">
            {imagens.map((imgSrc, i) => (
              <img
                key={i}
                src={imgSrc}
                alt={`Imagem ilustrativa de ${bloco.titulo}`}
                class="w-full max-w-sm rounded-xl transition duration-300 ease-in-out md:max-w-md"
                loading="lazy"
              />
            ))}
          </div>
        </div>
      );
    })
  }
</section>
