---
const { textos, iniciativas, projetos = [] } = Astro.props;
---

<section class="max-w-5xl mx-auto px-4 py-16 space-y-8">
  <!-- Título e descrição -->
  <h1 class="text-3xl font-bold text-primary">
    {iniciativas?.projetosDePesquisa ?? "Projetos de Pesquisa"}
  </h1>
  <p class="text-base-content mb-4">
    {iniciativas?.descricaoProjetosDePesquisa ??
      "Projetos desenvolvidos por docentes e associados ao CPPS, com apoio de agências de fomento."}
  </p>

  <!-- Lista de projetos sem ordenação -->
  <div class="space-y-4">
    {projetos.map((proj, index) => (
      <details class="border border-base-300 rounded-xl p-4 group">
        <summary class="cursor-pointer text-lg font-semibold text-primary group-open:mb-4">
          {proj.titulo} — <span class="text-base-content">{proj.docente}</span>
          <span class="text-sm text-neutral-500">({proj.periodo})</span>
        </summary>
        <div class="space-y-2 mt-2 text-base-content">
          <p><strong>Agência:</strong> {proj.agencia}</p>
          <p><strong>Processo:</strong> {proj.processo}</p>
          <p><strong>Natureza:</strong> {proj.natureza}</p>
          <p><strong>Valor:</strong> {proj.valor}</p>
          <p><strong>Pesquisadores Associados:</strong> {proj.associados}</p>
          <p><strong>Resumo:</strong> {proj.resumo}</p>
          {Array.isArray(proj.apoioCentro) && proj.apoioCentro.length > 0 && (
            <div>
              <strong>Apoios do CPPS:</strong>
              <ul class="list-disc list-inside ml-4">
                {proj.apoioCentro.map((item) => (
                  <li>{item}</li>
                ))}
              </ul>
            </div>
          )}
        </div>
      </details>
    ))}
  </div>
</section>
