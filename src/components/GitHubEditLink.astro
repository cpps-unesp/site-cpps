---
import ReportIssueLink from "./ReportIssueLink.astro";

interface Props {
  githubPath?: string;
  lang?: string;
  texts?: any;
}

const { githubPath, lang = 'pt', texts = {} } = Astro.props;
const editLabel = texts.editOnGithub || (lang === 'en' ? 'Edit page' : (lang === 'es' ? 'Editar la pagina' : 'Editar a pagina'));
const reportLabel = lang === 'en' ? 'Report error' : (lang === 'es' ? 'Reportar error' : 'Reportar erro');

if (!githubPath) return null;

// Encode path segments to handle brackets and other special characters in filenames (like [lang]/[...slug].astro)
const encodedPath = githubPath
  .split('/')
  .map(segment => encodeURIComponent(segment))
  .join('/');

const url = `https://github.com/cpps-unesp/site-cpps/blob/main/${encodedPath}`;
---

<div class="flex flex-col sm:flex-row items-center justify-between gap-4 py-6 border-t border-base-300 mt-12 opacity-60 hover:opacity-100 transition-opacity">
  <div class="flex items-center gap-6">
    <a
      href={url}
      target="_blank"
      rel="noopener noreferrer"
      class="flex items-center gap-2 hover:text-primary transition-colors text-[10px] font-black uppercase tracking-widest"
    >
      <i class="fa-brands fa-github text-base"></i>
      <span>{editLabel}</span>
    </a>

    <a
      href="https://github.com/cpps-unesp/site-cpps/issues"
      target="_blank"
      rel="noopener noreferrer"
      class="flex items-center gap-2 hover:text-primary transition-colors text-[10px] font-black uppercase tracking-widest"
    >
      <i class="fa-solid fa-circle-question text-base"></i>
      <span>Feedback</span>
    </a>
  </div>

  <ReportIssueLink
    owner="cpps-unesp"
    repo="site-cpps"
    text={reportLabel}
    class="btn btn-ghost btn-xs text-[10px] font-black uppercase tracking-widest gap-2"
  />
</div>

<style>
  div {
    font-family: 'Montserrat', sans-serif;
  }
</style>
