---
import BaseLayout from '../layouts/BaseLayout.astro';
import NoticiasSection from './NoticiasSection.astro';
import { getCollection } from 'astro:content';
import { getTranslations } from '../utils/i18n';
import type { SupportedLang } from '../types/lang';

const { lang } = Astro.props as { lang: SupportedLang };
const locale = getTranslations(lang);

const allNoticias = await getCollection('noticias');

const noticias = allNoticias
  .filter(post => post.data.lang === lang)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const tituloPagina = locale.texts.header.noticias || 'Not√≠cias';
---

<BaseLayout lang={lang} titulo={tituloPagina} descricao={locale.descricao} texts={locale.texts}>
  <NoticiasSection noticias={noticias} lang={lang} />
</BaseLayout>
